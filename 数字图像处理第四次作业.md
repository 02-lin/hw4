#第四次作业--滤波器
####姓名：林袁钰
####班级：自动化66班 
####学号：21606504138

##摘要
空域滤波是一类常用的数字图像处理方法，包括平滑和钝化两个部分，它与频域滤波相对应，并且具有操作简单，运算量小的优点。本次作业借助matlab，在平滑方面，实现高斯平滑滤波和中值滤波，在钝化方面，实现非钝化掩蔽，sobel算子，Laplace算子以及canny算子的钝化效果并分析其优缺点。完成一下三个题目：

1. 空域低通滤波器：分别用高斯滤波器和中值滤波器去平滑测试图像test1和2，模板大小分别是3x3 ， 5x5 ，7x7； 分析各自优缺点；  
2. 利用固定方差 sigma=1.5产生高斯滤波器. 附件有产生高斯滤波器的方法； 分析各自优缺点；  
3. 利用高通滤波器滤波测试图像test3,4：包括unsharp masking, Sobel edge detector, and Laplace edge detection；Canny algorithm.分析各自优缺点；  
***
##关键词
matlab、空域滤波、高斯滤波器、中值滤波、非钝化掩蔽、sobel、laplace、canny。  
##作业内容
###1.空域低通滤波器：分别用高斯滤波器和中值滤波器去平滑测试图像test1和2，模板大小分别是3x3 ， 5x5 ，7x7； 分析各自优缺点；
* **空域滤波有关知识**  
图像的空域滤波是基于像素领域处理的滤波方法，即直接在图像所在的二维空间对每一个像素的灰度值进行处理。空域滤波是在图像空间通过邻域操作实现的，最常用的运算是模板运算，即将某个像素的值作为它本身的灰度值和相邻像素灰度值的函数。模板可以看作是n*n的小图像，如3*3，5*5，7*7等。  
空域滤波分为平滑和钝化两大类，类似于频率滤波中的低通和高通滤波。平滑滤波是为了降低图像灰度的尖锐化程度，常用于预处理任务中，钝化滤波主要是突出灰度的过度部分，常用于边缘增强和检测，突出图像细节等方面。  
* **高斯滤波和中值滤波调用函数**  
**h=fspecial('gaussian',[3 3],1);** 
建一个3*3模板的高斯滤波器  为高斯低通滤波，有两个参数，hsize表示模板尺寸，默认值为【3 3】，  sigma为滤波器的标准值，单位为像素，默认值为0.5.  
H = FSPECIAL('gaussian',HSIZE,SIGMA) returns a rotationally  
**I2=imfilter(test2,h,'conv');**  
**g=imfilter(f,w,filtering_mode,boundary_options,size_optinos)**      
f是输入图像，w为滤波模板，g为滤波结果；此处conv代表使用卷积完成滤波  
**M13=medfilt2(test1,[3 3]);**   
* **实验代码**   
实验代码在附件Q1中。  
* **实验结果**  
注：下面图片从左到右分别为原图和平滑滤波后的图。  
![q1-1](./photo/Q1/01.png)  
![q1-2](./photo/Q1/03.png)  
![q1-3](./photo/Q1/05.png)  
![q1-4](./photo/Q1/07.png)  
![q1-5](./photo/Q1/09.png)  
![q1-6](./photo/Q1/11.png)  
![q1-7](./photo/Q1/02.png)  
![q1-8](./photo/Q1/04.png)  
![q1-9](./photo/Q1/06.png)  
![q1-10](./photo/Q1/08.png)  
![q1-11](./photo/Q1/10.png)  
![q1-12](./photo/Q1/12.png)  
* **结果分析:**  
由实验结果发现，空域滤波的高斯滤波器能够对图像起到明显的平滑作用，且模板尺寸（即3*3，5*5，7*7等）越大，其模糊效果越明显。但对于test1，其效果并不理想，即使不断增大滤波器模板尺寸也没能有效改善。  
**高斯滤波：**  
*优点：*  
二维高斯函数旋转对称，在各个方向上平滑程度相同，不会改变原图像的边缘走向。  
高斯函数是单值函数，在所有方向上单调递减，描点像素不会受到距离描点较远的像素的过大影响，保证特征点和边缘的特性。  
在频域上，滤波过程不会被高频信号污染。   
*缺点：*  
对于带有块状噪音的原图像，高斯滤波处理效果不高。  
**中值滤波:**  
*优点：* 
在处理脉冲噪声以及椒盐噪声时效果俱佳，能够有效的保护好图像的边缘信息。  
*缺点*  
对图像的平滑处理下过不是很好，可能会改变原图像的边缘走向。  
实现过程中像素信息一直在变化，易被影响而导致图像污染。  


###2. 利用固定方差 sigma=1.5产生高斯滤波器. 附件有产生高斯滤波器的方法； 分析各自优缺点；
* **高斯滤波器有关知识**  
高斯滤波器是一种根据高斯函数形状来选择模板权值的线性平滑滤波方法。高斯平滑滤波器对于去除服从正态分布的噪声有极大的效果。  
* **高斯滤波器形成部分程序**
>>  n01=3;sigma01=1.5;n02=3;sigma02=1.5;  
>>r=[1,0,0,1];  

>>for i=1:n02  
>>      for j=1:n01  
>>      u=r.*[j-(n01+1)/2 i-(n02+1)/2]';  
>>      h(i,j)=exp(-u(1)^2/(2*sigma01^2))/(sigma01*sqrt(2*pi))*exp(-u(2)^2/(2*sigma02^2))/(sigma02*sqrt(2*pi));  
>>    end  
>>end  

>>h=h/sqrt(sum(sum(h.*h)));  

* **实验代码**  
实验代码在附件Q2中。   
* **实验结果**  
![q2-1](./photo/Q2/01.png)  
![q2-2](./photo/Q2/02.png)  
* **结果分析**  
*优点：*  
高斯滤波是一种线性平滑滤波，适用于消除高斯噪声，从处理后的test2来看，图像的平滑效果较为明显，即对于test2这一类噪声，用高斯滤波能得到较好的效果。  
*缺点：*    
但对于test1来说，高斯滤波效果并不是很好，因为test1所带的时块状的椒盐噪声和脉冲噪声，对于这一类噪声高斯滤波器的处理效果并不是很好，综合作业一，对于此类噪声，应该用中值滤波器比较好。  

###3. 利用高通滤波器滤波测试图像test3,4：包括unsharp masking, Sobel edge detector, and Laplace edge detection；Canny algorithm.分析各自优缺点；  
* **unsharp masking**  
**1 有关概念：**  
非钝化掩蔽是一种基于空域操作的图像钝化方法，主要思路使用原始图像加上原始图像与平滑图像的差值作为目标图像，完成非钝化掩蔽。   
一般处理步骤：  
（1）将原始图像模糊处理得到f（x,y）;  
（2）从原图像减去模糊图像，得模板g(x,y);  
（3） 将模板加到原图像上，得到目标图像。  
**2  实验代码：**  
实验代码在附件Q3_UnsharpMasking。  
**3 实验结果：**  
![q3-1](./photo/Q3/Q3U2.png)  
![q3-2](./photo/Q3/Q3U1.png)  
* **Sobel edge detector**  
**1 有关概念：**  
图像中的变暖是指图像局部强度变化最显著的部分，主要存在于目标与目标，目标与背景，区域与区域之间，是图像分割纹理特征和形状特征得图像分析的重要基础。图像的边缘有方向和幅度两个属性，变化可有微分算子检测出来。  
利用sobel算子进行边缘检测得一种方法就是，利用x方向和y方向得sobel对原始图像进行两个方向上得边缘检测，然后将两个方向上的检测结果加权求和。  
**2 实验代码：**  
实验代码在附件Q3_Sobel中。  
**3 实验结果：**  
![q3-3](./photo/Q3/Q3S1.png)  
![q3-4](./photo/Q3/Q3S2.png)  
* **Laplace edge detection**   
**1 有关概念：**  
Laplace算子是最简单的各向同性得微分算子，具有旋转不变性。将其转化为模板便可以得到Laplace算子得常用形式，因各类参考资料上都有相关图释，故于此不再赘述。    
Laplece算子可用二次微分正峰和负峰之间的过零点来确定，对鼓励点更为敏感，因此特别适用于以突出图像中的孤立点，孤立线或线端点为目的的场合。  
**2 实验代码：**  
实验代码在附件Q3_lapace中。  
**3 实验结果：**  
![q3-5](./photo/Q3/Q3L1.png)   
![q3-6](./photo/Q3/Q3L2.png)   
* **Canny algorithm**   
**1 有关概念：**  
在图像边缘检测中，抑制噪声和边缘精确定位是无法同时满足的。边缘检测算法通过平滑滤波去除图像噪声的同时，也增加了边缘定位的不确定性。反之，提高边缘检测算子对边缘敏感性的同时，也提高了对噪声的敏感性。canny算子力图在抗噪声干扰和精确定位边缘之间寻求最佳折中方案。  
实现步骤：  
用高斯滤波器平滑图像；  
用以一阶偏导的有限差分来计算滤波后图像梯度的幅值和方向；  
对梯度幅值进行非极大抑制，找出局部最大点，并置零以得到细化的边缘。  
用双阈值算法检测和连接边缘。  
**2 实验代码：**  
实验代码在附件Q3_canny中。  
**3 实验结果：**  
![q3-7](./photo/Q3/Q3C1.png)   
![q3-8](./photo/Q3/Q3C2.png)   

* **结果分析**   
1 反钝化掩蔽处理结果得到了边缘更加清晰的图像，但也引进了一些不期要的噪声。  
2 sobel算子用于提取边缘，简单有效，可以去除灰度不变或者变化缓慢区域的图像内容，在图像上显示为黑色区域。但易受噪声影响。  
3 Laplace算子进行边缘检测，可以同时检测出两个方向的边缘，但同意将噪声点五当作边缘突出到结果图中，如对test4 的处理效果就很不理想。  
4 canny算子相比起之前的sobel算子和laplace算子，较好的完成保证边缘精确定位的同时，抑制噪声的功能。较好的提取出图像的边缘。

###附录
【参考文献】  
[1]冈萨雷斯，数字图像处理第三版，北京，电子工业出版社，2011  
[2]周品，MATLAB数字图像处理，北京，清华大学出版社，2012  